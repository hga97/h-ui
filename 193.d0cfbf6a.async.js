"use strict";(self.webpackChunk_hga_h_ui=self.webpackChunk_hga_h_ui||[]).push([[193],{41042:function(M,w,i){i.r(w);var Z=i(45186)},55193:function(M,w,i){i.r(w),i.d(w,{Alert:function(){return X},CountDownTimer:function(){return q},MessageSource:function(){return sn},Search:function(){return H},SearchPanel:function(){return pn},SearchSource:function(){return xn},UploadFiles:function(){return Zn}});var Z=i(97857),P=i.n(Z),z=i(13769),T=i.n(z),m=i(67294),h=i(85893),K=["children","kind"],Q="h-alert",V={info:"#5352ED",positive:"#2ED573",negative:"#FF4757",warning:"#FFA502"},Y=function(n){var r=n.children,t=n.kind,o=t===void 0?"info":t,a=T()(n,K);return(0,h.jsx)("div",P()(P()({className:Q,style:{background:V[o]}},a),{},{children:r}))},X=Y,k=i(5574),x=i.n(k),$=function(n){var r=(0,m.useState)(n),t=x()(r,2),o=t[0],a=t[1],d=(0,m.useState)(!1),p=x()(d,2),c=p[0],f=p[1],s=function(){f(!0)},l=(0,m.useCallback)(function(){f(!1),a(n)},[a,f,n]);return(0,m.useEffect)(function(){var u;return c&&o>0?u=setTimeout(function(){a(o-1)},1e3):o===0&&l(),function(){clearTimeout(u)}},[c,o,l]),[o,c,s,l]},q=function(e){var n=e.initialCountdown,r=(0,m.useState)(""),t=x()(r,2),o=t[0],a=t[1],d=function(v){a(v.target.value)},p=$(n),c=x()(p,3),f=c[0],s=c[1],l=c[2];return(0,h.jsxs)("div",{className:"count-down-timer",children:[(0,h.jsx)("input",{className:"phone-input",type:"text",value:o,onChange:d}),(0,h.jsx)("button",{className:"code-btn",onClick:l,disabled:s,children:s?"".concat(f,"\u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"})]})},_=i(19632),nn=i.n(_),en=i(20745),tn=i(5031),an=i(73350),F=document.createElement("div");document.body.append(F),F.style.position="fixed",F.style.top="10px",F.style.zIndex="999";var rn=en.createRoot(F),on=function(n){var r=n.content,t=n.onRemove,o=(0,m.useState)(!1),a=x()(o,2),d=a[0],p=a[1];return(0,m.useEffect)(function(){var c;return d||(c=setTimeout(function(){t()},3e3)),function(){console.log(d,"ishover"),clearTimeout(c)}},[d,t]),(0,h.jsx)("div",{className:"notification",onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},children:r})},un=(0,m.forwardRef)(function(e,n){var r=(0,m.useState)([]),t=x()(r,2),o=t[0],a=t[1],d=(0,m.useRef)(0);return(0,m.useImperativeHandle)(n,function(){return{notify:function(c){var f=d.current++;a(function(s){var l=(0,h.jsx)(tn.Z,{className:"message",timeout:500,classNames:"message",children:(0,h.jsx)(on,{onRemove:function(){a(function(v){return v.filter(function(g){return g.key!==f.toString()})})},content:c})},f);return[].concat(nn()(s),[l])})}}},[]),(0,h.jsx)(an.Z,{children:o})}),b=(0,m.createRef)();rn.render((0,h.jsx)(un,{ref:b}));function sn(e){b.current.notify(e)}var ln=i(52677),G=i.n(ln),cn=i(61062),fn=i(93967),O=i.n(fn),dn=["suffix","className"];function vn(e,n){typeof e=="function"?e(n):G()(e)==="object"&&e&&"current"in e&&(e.current=n)}function hn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var t=n.filter(Boolean);return t.length<=1?t[0]:function(o){n.forEach(function(a){vn(a,o)})}}var H=m.forwardRef(function(e,n){var r=e.suffix,t=e.className,o=T()(e,dn),a=(0,m.useRef)(null),d=(0,h.jsx)("span",{className:"search-icon",onClick:function(){var c;if((c=a.current)!==null&&c!==void 0&&c.input){var f,s;(f=e.onSearch)===null||f===void 0||f.call(e,(s=a.current)===null||s===void 0||(s=s.input)===null||s===void 0?void 0:s.value)}},children:r||"\u{1F50D}"});return(0,h.jsx)(cn.default,P()({ref:hn(a,n),className:O()("search",t),placeholder:"\u8BF7\u8F93\u5165\u60F3\u641C\u7D22\u7684\u5185\u5BB9",allowClear:!0,suffix:d},o))}),On=i(41042),mn=function(){var n=(0,m.useRef)(null),r=(0,m.useState)(!1),t=x()(r,2),o=t[0],a=t[1],d=(0,m.useState)(""),p=x()(d,2),c=p[0],f=p[1],s=function(){a(!0)},l=function(){f("sideUpOut"),setTimeout(function(){a(!1),f("")},300)},u=function(g){console.log(g)};return(0,m.useEffect)(function(){var v=function(S){var R=S.target;n.current&&!n.current.contains(R)&&l()};return document.addEventListener("mousedown",v),function(){document.removeEventListener("mousedown",v)}},[]),(0,h.jsxs)("div",{className:"search-panel",onMouseDown:s,ref:n,children:[(0,h.jsx)(H,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",onSearch:u}),o&&(0,h.jsxs)("div",{className:O()("search-panel-drowpdown",c),children:[(0,h.jsx)("div",{className:"panel-history",children:"\u5386\u53F2\u8BB0\u5F55"}),(0,h.jsx)("div",{className:"panel-think",children:"\u731C\u4F60\u6240\u60F3"}),(0,h.jsx)("div",{className:"panel-colse",onClick:l,children:"\u5173\u95ED"})]})]})},pn=mn,gn=i(5927),Sn=["onSearch","onChange","suffix"];function Cn(e,n){typeof e=="function"?e(n):G()(e)==="object"&&e&&"current"in e&&(e.current=n)}function Pn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var t=n.filter(Boolean);return t.length<=1?t[0]:function(o){n.forEach(function(a){Cn(a,o)})}}var yn=m.forwardRef(function(e,n){var r=e.onSearch,t=e.onChange,o=e.suffix,a=T()(e,Sn),d=m.useRef(null),p=function(u){u&&u.target&&u.type==="click"&&r&&r(u.target.value,u),t&&t(u)},c=function(u){if(r){var v;if((v=d.current)!==null&&v!==void 0&&v.input){var g;r((g=d.current)===null||g===void 0||(g=g.input)===null||g===void 0?void 0:g.value,u)}}},f=function(u){c(u)},s=(0,h.jsx)("span",{className:"search-icon",onClick:function(u){u.stopPropagation(),c(u)},children:o||"\u{1F50D}"});return(0,h.jsx)(gn.Z,P()(P()({ref:Pn(d,n),onPressEnter:f,className:"search",placeholder:"\u8BF7\u8F93\u5165\u60F3\u641C\u7D22\u7684\u5185\u5BB9",allowClear:!0},a),{},{suffix:s,onChange:p}))}),xn=yn,jn=i(15009),y=i.n(jn),Nn=i(99289),U=i.n(Nn),wn=i(21054),J=i(23511),E=i(78125),Fn=i(59542),L=i(54683),Un="ghp_nUtnJuaAQKWwGCPS",Rn="JITCTqMvh9c8Nc2H5Vmh",Tn="hgatest",En="files",W="main",Ln="https://api.github.com/repos",D="".concat(Ln,"/").concat(Tn,"/").concat(En,"/contents"),B="static/images",A={Authorization:"token ".concat(Un).concat(Rn),"Content-Type":"application/json; charset=utf-8"},Dn=function(n){return new Promise(function(r,t){var o=new FileReader;o.readAsDataURL(n),o.onload=function(){var a=o.result;r(a.split(",")[1])},o.onerror=function(a){return t(a)}})},Bn=function(){var e=U()(y()().mark(function n(){var r,t;return y()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r="".concat(D,"/").concat(B),a.next=3,L.Z.get(r,{headers:A}).catch(function(d){return console.log(d)});case 3:return t=a.sent,a.abrupt("return",Array.isArray(t==null?void 0:t.data)?t.data:[]);case 5:case"end":return a.stop()}},n)}));return function(){return e.apply(this,arguments)}}(),An=function(){var e=U()(y()().mark(function n(r){var t,o,a,d,p,c,f,s,l,u,v;return y()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return a=r.content,d=r.file,p=r.onUploadProgress,c=new Date,f=((t=d.name)===null||t===void 0?void 0:t.split(".").pop())||"png",s="".concat(B,"/").concat(c.getTime(),".").concat(f),l="".concat(D,"/").concat(s),u={branch:W,message:"upload",content:a,path:s},S.next=8,L.Z.put(l,u,{headers:A,onUploadProgress:p}).catch(function(R){return console.log(R)});case 8:return v=S.sent,S.abrupt("return",(v==null||(o=v.data)===null||o===void 0?void 0:o.content)||"");case 10:case"end":return S.stop()}},n)}));return function(r){return e.apply(this,arguments)}}(),In=function(){var e=U()(y()().mark(function n(r){var t,o,a,d,p,c;return y()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=r.name,o=r.sha,a="".concat(B,"/").concat(t),d="".concat(D,"/").concat(a),p={branch:W,message:"delete",path:a,sha:o},s.next=6,L.Z.delete(d,{headers:A,data:P()({},p)}).catch(function(l){return console.log(l)});case 6:return c=s.sent,s.abrupt("return",(c==null?void 0:c.data)||"");case 8:case"end":return s.stop()}},n)}));return function(r){return e.apply(this,arguments)}}(),Mn=function(){var n=(0,m.useState)([]),r=x()(n,2),t=r[0],o=r[1];(0,m.useEffect)(function(){Bn().then(function(f){var s=f.map(function(l){var u=l.sha,v=l.name,g=l.download_url;return{sha:u,name:v,status:"done",url:g}});o(s)})},[]);var a=function(s){var l=s.fileList;o(l)},d=function(s){var l=s.type==="image/jpeg"||s.type==="image/png";if(!l)return J.ZP.error("You can only upload JPG/PNG file!"),E.Z.LIST_IGNORE;var u=s.size/1024/1024<2;return u?l&&u:(J.ZP.error("Image must smaller than 2MB!"),E.Z.LIST_IGNORE)},p=function(){var f=U()(y()().mark(function s(l){var u,v,g,S;return y()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return u=l.file,C.next=3,Dn(u);case 3:return v=C.sent,g=function(j){var bn=j.loaded/j.total*100;o(function(Gn){return Gn.map(function(I){return I.uid===u.uid?P()(P()({},I),{},{percent:bn}):I})})},C.next=7,An({content:v,file:u,onUploadProgress:g});case 7:S=C.sent,o(S?function(N){return N.map(function(j){return j.uid===u.uid?P()(P()({},j),{},{sha:S.sha,name:S.name,url:S.download_url,status:"done",percent:100}):j})}:function(N){return N.map(function(j){return j.uid===u.uid?{uid:u.uid,name:u.name,status:"error"}:j})});case 9:case"end":return C.stop()}},s)}));return function(l){return f.apply(this,arguments)}}(),c={multiple:!0,listType:"picture-card",fileList:t,onChange:a,beforeUpload:d,customRequest:p,onRemove:function(){var f=U()(y()().mark(function l(u){var v,g,S;return y()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!u.sha){C.next=7;break}return C.next=3,In(u);case 3:v=C.sent,v&&(g=t.filter(function(N){return N.sha!==u.sha}),o(g)),C.next=9;break;case 7:S=t.filter(function(N){return N.uid!==u.uid}),o(S);case 9:case"end":return C.stop()}},l)}));function s(l){return f.apply(this,arguments)}return s}()};return(0,h.jsx)("div",{className:"upload-files",children:(0,h.jsx)(E.Z,P()(P()({},c),{},{children:(0,h.jsx)(Fn.ZP,{icon:(0,h.jsx)(wn.Z,{}),style:{border:0,background:"none"},children:"Upload"})}))})},Zn=Mn},45186:function(M,w,i){i.r(w)}}]);
